<!doctype html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>コンフリクトを直そう</title>
</head>
<body>
    <h1>コンフリクトを直そう</h1>
    <p>優さん、ブランチを develop に変更してください。以下がその手続きです。</p>
    <code>
        <xmp>$ git pull
$ git checkout develop
$ git branch</xmp>
    </code>
    <p>ここまで叩いて、下記のように表示されることを確認してください。</p>
    <code>
<xmp>* develop
  master</xmp>
</code>
    <p>git branch とはブランチを確認するコマンドです。develop にアスタリスクがついていれば、今優さんのローカルは develop というブランチになっているということになります。</p>
    <p>checkout とは作業ブランチを変更するコマンドです。ここで一旦 index.html を確認してください。中身がずいぶん変わっていると思います。僕がやっておきました。</p>

    <p>多くの場合、master ブランチを作業ブランチに取り込むことはしません。なぜなら master とはユーザーが見るもの（＝完成品）であり、そこに作業途中のデータが入ることはおかしいからです。</p>
    <p>ですが、すでに master にコミットされてた変更（優さんのコミット）を作業ブランチ（develop）に取り込まないと、以後の作業に整合性がとれなくなりますので develop 上で master を取り込みます。</p>
    <p>ここで次の git コマンドを叩いてください。</p>
    <code>
        <xmp>$ git merge master</xmp>
    </code>
    <p>すると以下のメッセージが表示されるはずです。</p>
    <code>
<xmp>CONFLICT (content): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result.</xmp>
    </code>
    <p>出ました。これがコンフリクトです。「index.html でコンフリクトしている。自動マージに失敗したのでこれをfixし、それをコミットしろ」とのことです。コンフリクトが起こる仕組みは先日お話したとおりです。</p>
    <p>エディタで index.html を見てください。</p>
    <code>
        <xmp><<<<<<< HEAD</xmp>
    </code>
    <p>これが5行目にすぐ見つけられると思います。さらにファイルの後ろのほうを見ると</p>
    <code><xmp>=======
<title>HTML5 Styles</title>
</head>
<body>
    <h1>HTML5 Style</h1>
    <a href="#">link</a>
>>>>>>> master
</body>
</html></xmp></code>
    <p>となっていますね。「=======」を境に、上が HEAD （develop ブランチのリモートの状態）で下がローカル（今回の場合、master からマージした内容）となります。</p>
    <p>コンフリクトを解消するだけなら、「<<<<<<< HEAD」「=======」「>>>>>>> master」の３行を削除すれば済みます。が、title タグや body タグが重複してしまうので、HTML を適当に編集してください。僕が書いたいろいろなやつを消すのもよし、残すのもよし、です。</p>
    <p>編集が済んだら、develop へコミットして push しましょう。</p>
    <code>
<xmp>$ git commit -a  ←vimが立ち上がり Merge〜 みたいなメッセージが出ますので、:wq と打って[enter]を押してください。<br>
$ git push origin develop</xmp>
    </code>
    <hr>
    <p>さて、前述のとおり、master ブランチはユーザーが見る完成品のソースなので、master で随時変更を加えていくみたいなやり方は望ましくありません。現在、develop というブランチで作業をしている状態なので、このまま develop で編集を続けるようにしてください。</p>
    <p>ユーザーが見る完成品とまではいかなくても、ある程度公開できる状態になった時に develop を master へマージしていきます。（たぶんそれはもうちょっと先の話です）</p>
</body>
</html>